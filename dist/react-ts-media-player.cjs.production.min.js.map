{"version":3,"file":"react-ts-media-player.cjs.production.min.js","sources":["../src/SrOnly.tsx","../src/ActionButton.tsx","../src/ScrubBar.tsx","../src/SubtitleContainer.tsx","../src/Menu.tsx","../src/MenuItem.tsx","../src/SubtitleMenu.tsx","../src/ToggleButton.tsx","../src/TracklistMenu.tsx","../src/TimeUtils.ts","../src/AudioPlayer.tsx"],"sourcesContent":["// @file\n// Screenreader only wrapper.\n\nimport React from 'react';\n\nimport { IAudioPlayerConfig } from './Types';\n\ninterface IProps {\n  children?: React.ReactNode;\n  config?: IAudioPlayerConfig;\n}\n\nconst SrOnly: React.FunctionComponent<IProps> = ({config = {}, children}) => {\n  const classNames = [].concat(config.classNames['sr-only'] || []);\n  return <span className={classNames.join(' ')}>{children}</span>\n};\n\nexport default SrOnly;\n","// @file\n// Functional component for an action button.\n\nimport React from 'react';\n\nimport SrOnly from './SrOnly';\n\nimport { IAudioPlayerConfig } from './Types';\n\ninterface IProps {\n  btnType: string;\n  enabled?: boolean;\n  hidden?: boolean;\n  onClick?: (e: React.MouseEvent) => void;\n  children?: React.ReactNode;\n  className?: string;\n  config?: IAudioPlayerConfig;\n}\n\nconst ActionButton: React.FunctionComponent<IProps> = ({\n  enabled = true,\n  hidden = false,\n  btnType,\n  onClick,\n  children,\n  className,\n  config = {},\n}) => {\n  const classNames = [className || '']\n    .concat(config.classNames[btnType] || []);\n  const iconClassNames = []\n    .concat(config.icons[btnType] || []);\n  const iconElem = config.icons[btnType] || null;\n  return (\n    <button\n      className={classNames.join(' ')}\n      disabled={!enabled}\n      hidden={hidden}\n      onClick={onClick}\n    >\n      <SrOnly config={config}>{children}</SrOnly>\n      {!iconElem && <span className={iconClassNames.join(' ')}></span>}\n      {iconElem}\n    </button>\n  );\n};\n\nexport default ActionButton;\n","// @file\n// Functional component for an action button.\n\nimport React from 'react';\n\ninterface IProps {\n  defaultValue: number;\n  className?: string;\n  onClick?: (pos: number) => void;\n}\n\nconst getOffsetX = (e: React.TouchEvent | React.MouseEvent) => {\n  if (typeof (e as React.MouseEvent).nativeEvent.offsetX === 'number') {\n    return (e as React.MouseEvent).nativeEvent.offsetX;\n  }\n  if (typeof (e as React.TouchEvent).targetTouches === 'object') {\n    const touchE = e as React.TouchEvent;\n    const rect = (touchE.target as HTMLDivElement).getBoundingClientRect();\n    return touchE.targetTouches[0].pageX - rect.left;\n  }\n  return 0;\n};\n\nconst ScrubBar: React.FunctionComponent<IProps> = ({\n  defaultValue = 0,\n  className,\n  onClick,\n}: IProps) => {\n  const outer = React.useRef(null);\n\n  const [value, setValue] = React.useState(defaultValue);\n  const [offsetX, setOffsetX] = React.useState(0);\n  const [scrubbing, setScrubbing] = React.useState(false);\n\n  React.useEffect(() => {\n    setValue(defaultValue);\n  }, [defaultValue]);\n\n  React.useEffect(() => {\n    if (scrubbing) {\n      const pos = offsetX / outer.current.clientWidth;\n      setValue(pos * 100);\n      if (typeof onClick === 'function') {\n        onClick(pos);\n      }\n    }\n  }, [scrubbing, offsetX]);\n\n  const onDown = (e: React.TouchEvent | React.MouseEvent) => {\n    setScrubbing(true);\n    setOffsetX(getOffsetX(e));\n  };\n\n  const onUp = () => setScrubbing(false);\n\n  return (\n    <div\n      className={[className || ''].join(' ')}\n      onMouseDown={onDown}\n      onMouseUp={onUp}\n      onMouseMove={(e: React.MouseEvent) => {\n        if (scrubbing) {\n          setOffsetX(getOffsetX(e));\n        }\n      }}\n      onTouchStart={onDown}\n      onTouchEnd={onUp}\n      onTouchMove={(e: React.TouchEvent) => {\n        if (scrubbing) {\n          setOffsetX(getOffsetX(e));\n        }\n      }}\n      ref={outer}\n    >\n      <div\n        className={[`${className}__fill`].join(' ')}\n        style={{ width: `${value}%` }}\n      >\n        <span className=\"sr-only\">{`${value} percent`}</span>\n      </div>\n    </div>\n  );\n};\n\nexport default ScrubBar;\n","// @file\n// Oral Histories subtitle menu.\n\nimport React from 'react';\n\nconst memoiseTrack = (track: TextTrack): string => {\n  if (!track) {\n    return '';\n  }\n  const { kind, mode, language, cues } = track;\n  return [kind, mode, language, cues.length].join(',');\n};\n\ninterface IProps {\n  visible?: boolean;\n  lang?: string;\n  tracks: TextTrack[];\n  id: string;\n  className?: string;\n}\n\nconst SubtitleContainer: React.FunctionComponent<IProps> = ({\n  visible = true,\n  lang,\n  tracks = [],\n  id,\n  className,\n}: IProps) => {\n  const [text, setText] = React.useState('');\n  const [currentTrack, setCurrentTrack] = React.useState(null);\n\n  const cueChange = (e: Event) => {\n    const activeCues = (e.target as TextTrack).activeCues;\n\n    let newText = '';\n    let cue;\n\n    let i;\n    for (i = 0; i < activeCues.length; i += 1) {\n      cue = activeCues[i];\n      if (typeof cue.text !== 'undefined') {\n        newText += cue.text;\n      }\n    }\n    setText(newText);\n  };\n\n  React.useEffect(() => {\n    if (currentTrack) {\n      currentTrack.addEventListener('cuechange', cueChange, false);\n    }\n    return () => {\n      if (currentTrack) {\n        currentTrack.removeEventListener('cuechange', cueChange, false);\n      }\n    };\n  }, [memoiseTrack(currentTrack)]);\n\n  React.useEffect(() => {\n    if (lang && lang.length && tracks && tracks.length) {\n      let track = null;\n      let i;\n      for (i = 0; i < tracks.length; i += 1) {\n        if (tracks[i].language === lang) {\n          track = tracks[i];\n          break;\n        }\n      }\n      setCurrentTrack(track);\n    }\n  }, [lang, tracks]);\n\n  return (\n    <div\n      className={[className || '', 'video-wrapper__subtitle-container'].join(\n        ' ',\n      )}\n      hidden={!visible}\n      aria-hidden={!visible}\n      lang={lang}\n      id={id}\n      aria-atomic=\"true\"\n      aria-live=\"polite\"\n      aria-relevant=\"additions text\"\n    >\n      {visible ? text : ' '}\n    </div>\n  );\n};\n\nexport default SubtitleContainer;\n","// @file\r\n// Menu container.\r\n\r\nimport React from 'react';\r\n\r\ninterface IProps {\r\n  id?: string;\r\n  visible?: boolean;\r\n  className?: string;\r\n  children?: React.ReactNode;\r\n}\r\n\r\nconst Menu: React.FunctionComponent<IProps> = ({\r\n  id,\r\n  visible = false,\r\n  className,\r\n  children,\r\n}: IProps) => {\r\n  return (\r\n    <ol\r\n      className={['video-wrapper__popup-menu', className || ''].join(' ')}\r\n      id={id}\r\n      hidden={!visible}\r\n      aria-expanded={visible}\r\n    >\r\n      {children}\r\n    </ol>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n","import React from 'react';\n\ninterface IProps {\n  label: string;\n  value: string | number | null;\n  selected: boolean;\n  onSelect: (e: React.KeyboardEvent | React.MouseEvent) => void;\n}\n\nconst MenuItem: React.FunctionComponent<IProps> = ({\n  label,\n  value,\n  selected = false,\n  onSelect,\n}: IProps) => {\n  return (\n    <li>\n      <button\n        data-value={value}\n        data-state={selected ? 'active' : 'inactive'}\n        onClick={onSelect}\n        onKeyUp={(e) => {\n          if (e.key === 'Enter') {\n            onSelect(e);\n          }\n        }}\n      >\n        {label}\n      </button>\n    </li>\n  );\n};\n\nexport default MenuItem;\n","// @file\n// Oral Histories subtitle menu.\n\nimport React from 'react';\n\nimport Menu from './Menu';\nimport MenuItem from './MenuItem';\n\ninterface IProps {\n  visible: boolean;\n  id: string;\n  tracks: TextTrackList;\n  selected?: string;\n  onSelect: (selectedLang: string) => void;\n  className?: string;\n}\n\nconst SubtitleMenu: React.FunctionComponent<IProps> = ({\n  visible = false,\n  id,\n  tracks,\n  selected,\n  onSelect,\n  className,\n}: IProps) => {\n  const onSelectLang = (e: React.MouseEvent | React.KeyboardEvent) => {\n    const itemElem = e.target as HTMLElement;\n    const selectedLang = itemElem.getAttribute('data-value') || null;\n    if (typeof onSelect === 'function') {\n      onSelect(selectedLang);\n    }\n  };\n\n  const languageOptions = [\n    <MenuItem\n      key={'_none_'}\n      label={'Off'}\n      value={null}\n      selected={!selected}\n      onSelect={onSelectLang}\n    />,\n  ];\n  let track;\n  let i;\n  if (tracks && tracks.length) {\n    for (i = 0; i < tracks.length; i += 1) {\n      track = tracks[i];\n      languageOptions.push(\n        <MenuItem\n          key={`${track.language}-${i}`}\n          label={track.label}\n          value={track.language}\n          selected={selected && track.language === selected}\n          onSelect={onSelectLang}\n        />,\n      );\n    }\n  }\n\n  return (\n    <Menu\n      className={[className || '', 'subtitles-menu'].join(' ')}\n      id={id}\n      visible={visible}\n    >\n      {languageOptions}\n    </Menu>\n  );\n};\n\nexport default SubtitleMenu;\n","// @file\n// Functional component for a toggle button.\n\nimport React from 'react';\n\nimport SrOnly from './SrOnly';\n\nimport { IAudioPlayerConfig } from './Types';\n\ninterface IProps {\n  enabled?: boolean;\n  hidden?: boolean;\n  btnType: string;\n  toggleState?: boolean;\n  children?: React.ReactNode;\n  onClick?: (e: React.MouseEvent) => void;\n  className?: string;\n  config?: IAudioPlayerConfig;\n}\n\nconst ToggleButton: React.FunctionComponent<IProps> = ({\n  enabled = true,\n  hidden = false,\n  btnType,\n  toggleState = false,\n  children,\n  onClick,\n  className,\n  config = {},\n}: IProps) => {\n  const classNames = [className || '']\n    .concat(config.classNames[btnType] || []);\n  const iconFalseClassNames = []\n    .concat(config.icons[btnType] || [])\n    .concat(config.icons[`${btnType}__false`] || []);\n  const iconTrueClassNames = []\n    .concat(config.icons[btnType] || [])\n    .concat(config.icons[`${btnType}__true`] || []);\n  return (\n    <button\n      className={classNames.join(' ')}\n      disabled={!enabled}\n      hidden={hidden}\n      onClick={onClick}\n    >\n      <SrOnly config={config}>{children}</SrOnly>\n      <span\n        className={iconFalseClassNames.join(' ')}\n        hidden={toggleState}\n      />\n      <span\n        className={iconTrueClassNames.join(' ')}\n        hidden={!toggleState}\n      />\n    </button>\n  );\n};\n\nexport default ToggleButton;\n","// @file\r\n// Oral Histories subtitle menu.\r\n\r\nimport React from 'react';\r\n\r\nimport Menu from './Menu';\r\nimport MenuItem from './MenuItem';\r\n\r\ninterface IProps {\r\n  tracklist?: AudioTrack[];\r\n  selected?: number;\r\n  onSelect?: (track: number) => void;\r\n  id?: string;\r\n  visible?: boolean;\r\n  className?: string;\r\n}\r\n\r\nconst TracklistMenu: React.FunctionComponent<IProps> = ({\r\n  tracklist = [],\r\n  selected = 0,\r\n  visible = false,\r\n  onSelect,\r\n  id,\r\n  className,\r\n}: IProps) => {\r\n  const onSelectTrack = (e: React.MouseEvent | React.KeyboardEvent) => {\r\n    const itemElem = e.target as HTMLElement;\r\n    const indexAttr = itemElem.getAttribute('data-value') || null;\r\n    if (indexAttr === null) {\r\n      return;\r\n    }\r\n    const index = parseInt(indexAttr, 10);\r\n    if (typeof onSelect === 'function') {\r\n      onSelect(index);\r\n    }\r\n  };\r\n\r\n  const trackOptions = tracklist.map((track: AudioTrack, index: number) => {\r\n    return (\r\n      <MenuItem\r\n        key={index}\r\n        label={track.label}\r\n        value={index}\r\n        selected={index === selected}\r\n        onSelect={onSelectTrack}\r\n      />\r\n    );\r\n  });\r\n\r\n  return (\r\n    <Menu\r\n      className={[className || '', 'track-menu'].join(' ')}\r\n      id={id}\r\n      visible={visible}\r\n    >\r\n      {trackOptions}\r\n    </Menu>\r\n  );\r\n};\r\n\r\nexport default TracklistMenu;\r\n","// @file\n// Time utilities.\n\nconst strPadLeft = (n: number): string => {\n  if (n < 10) {\n    return `0${n}`;\n  }\n  return n.toString();\n};\n\nexport const toHHMMSS = (str: string): string => {\n  const secNum = parseInt(str, 10);\n  const hours = Math.floor(secNum / 3600);\n  const minutes = Math.floor((secNum - hours * 3600) / 60);\n  const seconds = secNum - hours * 3600 - minutes * 60;\n\n  return `${strPadLeft(hours)}:${strPadLeft(minutes)}:${strPadLeft(seconds)}`;\n};\n\nexport const toMMSS = (str: string): string => {\n  const secNum = parseInt(str, 10);\n  const minutes = Math.floor(secNum / 60);\n  const seconds = secNum - minutes * 60;\n\n  return `${strPadLeft(minutes)}:${strPadLeft(seconds)}`;\n};\n","// @file\n// Audio player base component.\n\nimport Emitter from 'eventemitter3';\nimport React from 'react';\n\nimport ActionButton from './ActionButton';\nimport ScrubBar from './ScrubBar';\nimport SubtitleContainer from './SubtitleContainer';\nimport SubtitleMenu from './SubtitleMenu';\nimport ToggleButton from './ToggleButton';\nimport TracklistMenu from './TracklistMenu';\n\nimport FontAwesome5 from './Configs/FontAwesome5';\nimport { toMMSS } from './TimeUtils';\nimport { IAudioPlayerConfig } from './Types';\n\ninterface IPlaylistItem {\n  index: number;\n  label: string;\n  audioUrl: string;\n  transcriptUrl: string | null;\n}\n\ninterface IProps {\n  playlist: IPlaylistItem[];\n  id?: string;\n  eventRouter?: Emitter;\n  crossOrigin?: 'anonymous' | 'use-credentials',\n  onEndNextFile?: boolean;\n  config?: IAudioPlayerConfig;\n  singleTrack?: boolean;\n}\n\nconst AudioPlayer: React.FunctionComponent<IProps> = ({\n  playlist = [],\n  id = 'audio-player',\n  eventRouter,\n  crossOrigin,\n  onEndNextFile = false,\n  config = {},\n  singleTrack = false,\n}: IProps) => {\n  const [fileData, setFileData] = React.useState([]);\n  const [selectedFile, setSelectedFile] = React.useState(0);\n  const [progress, setProgress] = React.useState(0);\n  const [timestamp, setTimestamp] = React.useState('00:00');\n  const [playing, setPlaying] = React.useState(false);\n  const [ended, setEnded] = React.useState(false);\n  const [muted, setMuted] = React.useState(false);\n  const [selectedLanguage, setSelectedLanguage] = React.useState(null);\n  const [showTrackListMenu, setShowTrackListMenu] = React.useState(false);\n  const [showSubtitleMenu, setShowSubtitleMenu] = React.useState(false);\n  const [videoMetadataLoaded, setVideoMetadataLoaded] = React.useState(false);\n\n  const captionsContainerId = `${id}__captions`;\n  const timeIndicatorId = `${id}__time-indicator`;\n  const tracklistId = `${id}__track-list`;\n  const subtitleMenuId = `${id}__subtitle-menu`;\n\n  const audioElem = React.useRef(null);\n  const timeElapsedElem = React.useRef(null);\n\n  React.useEffect(() => {\n    audioElem.current.setAttribute('playsinline', 'playsinline');\n  }, []);\n\n  React.useEffect(() => {\n    setFileData(playlist);\n    setSelectedFile(0);\n  }, [playlist]);\n\n  const canPlayPrev = selectedFile > 0;\n  const canPlayNext = selectedFile < fileData.length - 1;\n\n  React.useEffect(() => {\n    audioElem.current.load();\n    audioElem.current.currentTime = 0;\n    setProgress(0);\n  }, [selectedFile]);\n\n  const selectTrack = (trackNumber: number) => {\n    setPlaying(false);\n    setEnded(false);\n    setVideoMetadataLoaded(false);\n    setSelectedFile(trackNumber);\n  };\n\n  const hasVtt = (file: IPlaylistItem) => {\n    return file.transcriptUrl && file.transcriptUrl.length > 0;\n  };\n\n  const subtitleTracks = () => {\n    if (!videoMetadataLoaded) {\n      return [];\n    }\n    return audioElem.current.textTracks;\n  };\n\n  const playable = fileData && fileData.length && videoMetadataLoaded;\n\n  const selectSubtitleLanguage = (lang?: string) => {\n    setShowSubtitleMenu(false);\n    setSelectedLanguage(lang && lang.length ? lang : null);\n  };\n\n  const onLoadedMetadata = () => {\n    setVideoMetadataLoaded(true);\n    selectSubtitleLanguage(selectedLanguage);\n\n    // this.highlighter.selectedFile = this.state.selectedFile;\n    // this.highlighter.updateVideoElement(this.videoElement);\n    // this.highlighter.onVideoElementLoad();\n  };\n\n  const onTimeUpdate = () => {\n    if (audioElem.current.duration > 0) {\n      const value =\n        (100 / audioElem.current.duration) * audioElem.current.currentTime;\n      setProgress(value);\n      setTimestamp(toMMSS(audioElem.current.currentTime));\n    }\n  };\n\n  const playPauseAction = () => {\n    if (!playable) {\n      return;\n    }\n    let newPlaying = false;\n    if (audioElem.current.paused) {\n      audioElem.current.play();\n      newPlaying = true;\n    } else {\n      audioElem.current.pause();\n    }\n    setPlaying(newPlaying);\n    setTimestamp(toMMSS(audioElem.current.currentTime));\n    if (eventRouter) {\n      eventRouter.emit('state.playing', newPlaying);\n    }\n  };\n\n  const nextTrackAction = () => {\n    if (canPlayNext) {\n      selectTrack(selectedFile + 1);\n    }\n  };\n\n  const nextTrackAndPlayAction = () => {\n    if (canPlayNext) {\n      nextTrackAction();\n      setTimeout(() => playPauseAction(), 500);\n    }\n  };\n\n  const onEnded = () => {\n    if (onEndNextFile) {\n      nextTrackAndPlayAction();\n      return;\n    }\n    setEnded(true);\n    setTimestamp(toMMSS(audioElem.current.currentTime));\n    if (eventRouter) {\n      eventRouter.emit('state.playing', false);\n      eventRouter.emit('state.ended', true);\n    }\n  };\n\n  const moveBackwardAction = () => {\n    if (!playable) {\n      return;\n    }\n    audioElem.current.currentTime -= 5;\n  };\n\n  const moveForwardAction = () => {\n    if (!playable) {\n      return;\n    }\n    audioElem.current.currentTime += 5;\n  };\n\n  const rewindAction = () => {\n    audioElem.current.currentTime = 0;\n    setEnded(false);\n    setTimestamp(toMMSS(audioElem.current.currentTime));\n    setProgress(0);\n    if (eventRouter) {\n      eventRouter.emit('state.ended', false);\n    }\n  };\n\n  React.useEffect(() => {\n    let i;\n    for (i = 0; i < audioElem.current.textTracks.length; i += 1) {\n      audioElem.current.textTracks[i].mode =\n        audioElem.current.textTracks[i].language === selectedLanguage\n          ? 'showing'\n          : 'hidden';\n    }\n  }, [selectedLanguage]);\n\n  const toggleMuteAction = () => {\n    const newMute = !audioElem.current.muted;\n    audioElem.current.muted = newMute;\n    setMuted(newMute);\n  };\n\n  const handleRemoteAction = (action: string) => {\n    if (action === 'backward') {\n      moveBackwardAction();\n    } else if (action === 'play_pause') {\n      playPauseAction();\n    } else if (action === 'reset') {\n      rewindAction();\n    } else if (action === 'forward') {\n      moveForwardAction();\n    }\n  };\n\n  React.useEffect(() => {\n    if (eventRouter) {\n      eventRouter.on('remote.action', handleRemoteAction);\n    }\n    return () => {\n      if (eventRouter) {\n        eventRouter.off('remote.action', handleRemoteAction);\n      }\n    };\n  }, []);\n\n  const currentFile = fileData[selectedFile] || null;\n\n  return (\n    <div className=\"video-wrapper\">\n      <audio\n        className=\"video-element\"\n        data-oh-audio-player=\"1\"\n        crossOrigin={crossOrigin}\n        preload=\"metadata\"\n        ref={audioElem}\n        onLoadedMetadata={onLoadedMetadata}\n        onEnded={onEnded}\n        onTimeUpdate={onTimeUpdate}\n        aria-describedby={captionsContainerId}\n      >\n        {currentFile && <source src={currentFile.audioUrl} type=\"audio/mpeg\" />}\n        {currentFile && hasVtt(currentFile) && (\n          <track\n            src={currentFile.transcriptUrl}\n            kind=\"captions\"\n            label=\"English\"\n            srcLang=\"en\"\n          />\n        )}\n      </audio>\n\n      <div className=\"video-controls\">\n        <ScrubBar\n          defaultValue={progress}\n          className=\"video-controls__progress-bar\"\n          onClick={(pos: number) => {\n            audioElem.current.currentTime = pos * audioElem.current.duration;\n          }}\n        />\n\n        <label className=\"sr-only\" htmlFor={timeIndicatorId}>\n          Time elapsed\n        </label>\n\n        <input\n          className=\"video-controls__time-elapsed\"\n          id={timeIndicatorId}\n          readOnly\n          ref={timeElapsedElem}\n          value={timestamp}\n        />\n\n        <div className=\"w-100\" />\n\n        <div className=\"video-controls__button-wrapper\">\n          <ToggleButton\n            btnType=\"tracklist\"\n            aria-controls={tracklistId}\n            enabled={fileData.length > 0 && !singleTrack}\n            onClick={() => {\n              setShowSubtitleMenu(false);\n              setShowTrackListMenu(!showTrackListMenu);\n            }}\n            toggleState={showTrackListMenu}\n            config={config}\n          >\n            Tracklist\n          </ToggleButton>\n\n          <div className=\"video-controls__button-wrapper__space\" />\n\n          <ActionButton\n            btnType=\"previous-audio\"\n            enabled={fileData.length > 1 && canPlayPrev}\n            onClick={() => {\n              if (canPlayPrev) {\n                selectTrack(selectedFile - 1);\n              }\n            }}\n            config={config}\n          >\n            Previous track\n          </ActionButton>\n\n          <ActionButton btnType=\"backward\" onClick={moveBackwardAction} config={config}>\n            Rewind\n          </ActionButton>\n\n          <ToggleButton\n            btnType=\"play\"\n            hidden={ended}\n            onClick={playPauseAction}\n            toggleState={playing}\n            config={config}\n          >\n            {playing ? 'Pause' : 'Play'}\n          </ToggleButton>\n\n          <ActionButton\n            btnType=\"reset\"\n            enabled={ended}\n            hidden={!ended}\n            onClick={rewindAction}\n            config={config}\n          >\n            Restart\n          </ActionButton>\n\n          <ActionButton btnType=\"forward\" onClick={moveForwardAction} config={config}>\n            Fast forward\n          </ActionButton>\n\n          <ActionButton\n            btnType=\"next-audio\"\n            enabled={fileData.length > 1 && canPlayNext}\n            onClick={nextTrackAction}\n            config={config}\n          >\n            Next track\n          </ActionButton>\n\n          <ToggleButton\n            btnType=\"closed-captioning\"\n            aria-controls={subtitleMenuId}\n            enabled={videoMetadataLoaded && hasVtt(currentFile)}\n            onClick={() => {\n              setShowTrackListMenu(false);\n              setShowSubtitleMenu(!showSubtitleMenu);\n            }}\n            toggleState={showSubtitleMenu}\n            config={config}\n          >\n            Closed captioning\n          </ToggleButton>\n\n          <div className=\"video-controls__button-wrapper__space\" />\n\n          <ToggleButton\n            btnType=\"mute\"\n            onClick={toggleMuteAction}\n            toggleState={muted}\n            config={config}\n          >\n            Mute\n          </ToggleButton>\n        </div>\n      </div>\n\n      <SubtitleMenu\n        visible={showSubtitleMenu}\n        id={subtitleMenuId}\n        tracks={subtitleTracks()}\n        selected={selectedLanguage}\n        onSelect={selectSubtitleLanguage}\n      />\n\n      <TracklistMenu\n        visible={!singleTrack && showTrackListMenu}\n        id={tracklistId}\n        tracklist={fileData}\n        selected={selectedFile}\n        onSelect={(trackNumber) => {\n          setShowTrackListMenu(false);\n          selectTrack(trackNumber);\n        }}\n      />\n\n      <SubtitleContainer\n        visible={selectedLanguage !== null}\n        lang={selectedLanguage}\n        tracks={subtitleTracks()}\n        id={captionsContainerId}\n      />\n    </div>\n  );\n};\n\nexport default AudioPlayer;\n\nexport const defaultConfigs = {\n  FontAwesome5,\n};\n"],"names":["SrOnly","config","children","classNames","concat","React","className","join","ActionButton","enabled","hidden","btnType","onClick","iconClassNames","icons","iconElem","disabled","getOffsetX","e","nativeEvent","offsetX","targetTouches","touchE","rect","target","getBoundingClientRect","pageX","left","ScrubBar","defaultValue","outer","useRef","useState","value","setValue","setOffsetX","scrubbing","setScrubbing","useEffect","pos","current","clientWidth","onDown","onUp","onMouseDown","onMouseUp","onMouseMove","onTouchStart","onTouchEnd","onTouchMove","ref","style","width","SubtitleContainer","track","visible","lang","tracks","id","text","setText","currentTrack","setCurrentTrack","cueChange","cue","i","activeCues","newText","length","addEventListener","removeEventListener","kind","mode","language","cues","Menu","MenuItem","selected","onSelect","onKeyUp","key","label","SubtitleMenu","onSelectLang","selectedLang","getAttribute","languageOptions","push","ToggleButton","toggleState","iconFalseClassNames","iconTrueClassNames","TracklistMenu","tracklist","onSelectTrack","indexAttr","index","parseInt","trackOptions","map","strPadLeft","n","toString","toMMSS","str","secNum","minutes","Math","floor","seconds","playlist","eventRouter","crossOrigin","onEndNextFile","singleTrack","fileData","setFileData","selectedFile","setSelectedFile","progress","setProgress","timestamp","setTimestamp","playing","setPlaying","ended","setEnded","muted","setMuted","selectedLanguage","setSelectedLanguage","showTrackListMenu","setShowTrackListMenu","showSubtitleMenu","setShowSubtitleMenu","videoMetadataLoaded","setVideoMetadataLoaded","captionsContainerId","timeIndicatorId","tracklistId","subtitleMenuId","audioElem","timeElapsedElem","setAttribute","canPlayPrev","canPlayNext","load","currentTime","selectTrack","trackNumber","hasVtt","file","transcriptUrl","subtitleTracks","textTracks","playable","selectSubtitleLanguage","playPauseAction","newPlaying","paused","play","pause","emit","nextTrackAction","moveBackwardAction","moveForwardAction","rewindAction","handleRemoteAction","action","on","off","currentFile","preload","onLoadedMetadata","onEnded","setTimeout","onTimeUpdate","duration","src","audioUrl","type","srcLang","htmlFor","readOnly","newMute"],"mappings":"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"}