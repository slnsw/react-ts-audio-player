{"version":3,"file":"react-ts-media-player.cjs.development.js","sources":["../src/SrOnly.tsx","../src/ActionButton.tsx","../src/ScrubBar.tsx","../src/SubtitleContainer.tsx","../src/Menu.tsx","../src/MenuItem.tsx","../src/SubtitleMenu.tsx","../src/ToggleButton.tsx","../src/TracklistMenu.tsx","../src/TimeUtils.ts","../src/AudioPlayer.tsx"],"sourcesContent":["// @file\n// Screenreader only wrapper.\n\nimport React from 'react';\n\nimport { IAudioPlayerConfig } from './Types';\n\ninterface IProps {\n  children?: React.ReactNode;\n  config?: IAudioPlayerConfig;\n}\n\nconst SrOnly: React.FunctionComponent<IProps> = ({config = {}, children}) => {\n  const classNames = [].concat(config.classNames['sr-only'] || []);\n  return <span className={classNames.join(' ')}>{children}</span>\n};\n\nexport default SrOnly;\n","// @file\n// Functional component for an action button.\n\nimport React from 'react';\n\nimport SrOnly from './SrOnly';\n\nimport { IAudioPlayerConfig } from './Types';\n\ninterface IProps {\n  btnType: string;\n  enabled?: boolean;\n  hidden?: boolean;\n  onClick?: (e: React.MouseEvent) => void;\n  children?: React.ReactNode;\n  className?: string;\n  config?: IAudioPlayerConfig;\n}\n\nconst ActionButton: React.FunctionComponent<IProps> = ({\n  enabled = true,\n  hidden = false,\n  btnType,\n  onClick,\n  children,\n  className,\n  config = {},\n}) => {\n  const classNames = [className || '']\n    .concat(config.classNames[btnType] || []);\n  const iconClassNames = []\n    .concat(config.icons[btnType] || []);\n  const iconElem = config.icons[btnType] || null;\n  return (\n    <button\n      className={classNames.join(' ')}\n      disabled={!enabled}\n      hidden={hidden}\n      onClick={onClick}\n    >\n      <SrOnly config={config}>{children}</SrOnly>\n      {!iconElem && <span className={iconClassNames.join(' ')}></span>}\n      {iconElem}\n    </button>\n  );\n};\n\nexport default ActionButton;\n","// @file\n// Functional component for an action button.\n\nimport React from 'react';\n\ninterface IProps {\n  defaultValue: number;\n  className?: string;\n  onClick?: (pos: number) => void;\n}\n\nconst getOffsetX = (e: React.TouchEvent | React.MouseEvent) => {\n  if (typeof (e as React.MouseEvent).nativeEvent.offsetX === 'number') {\n    return (e as React.MouseEvent).nativeEvent.offsetX;\n  }\n  if (typeof (e as React.TouchEvent).targetTouches === 'object') {\n    const touchE = e as React.TouchEvent;\n    const rect = (touchE.target as HTMLDivElement).getBoundingClientRect();\n    return touchE.targetTouches[0].pageX - rect.left;\n  }\n  return 0;\n};\n\nconst ScrubBar: React.FunctionComponent<IProps> = ({\n  defaultValue = 0,\n  className,\n  onClick,\n}: IProps) => {\n  const outer = React.useRef(null);\n\n  const [value, setValue] = React.useState(defaultValue);\n  const [offsetX, setOffsetX] = React.useState(0);\n  const [scrubbing, setScrubbing] = React.useState(false);\n\n  React.useEffect(() => {\n    setValue(defaultValue);\n  }, [defaultValue]);\n\n  React.useEffect(() => {\n    if (scrubbing) {\n      const pos = offsetX / outer.current.clientWidth;\n      setValue(pos * 100);\n      if (typeof onClick === 'function') {\n        onClick(pos);\n      }\n    }\n  }, [scrubbing, offsetX]);\n\n  const onDown = (e: React.TouchEvent | React.MouseEvent) => {\n    setScrubbing(true);\n    setOffsetX(getOffsetX(e));\n  };\n\n  const onUp = () => setScrubbing(false);\n\n  return (\n    <div\n      className={[className || ''].join(' ')}\n      onMouseDown={onDown}\n      onMouseUp={onUp}\n      onMouseMove={(e: React.MouseEvent) => {\n        if (scrubbing) {\n          setOffsetX(getOffsetX(e));\n        }\n      }}\n      onTouchStart={onDown}\n      onTouchEnd={onUp}\n      onTouchMove={(e: React.TouchEvent) => {\n        if (scrubbing) {\n          setOffsetX(getOffsetX(e));\n        }\n      }}\n      ref={outer}\n    >\n      <div\n        className={[`${className}__fill`].join(' ')}\n        style={{ width: `${value}%` }}\n      >\n        <span className=\"sr-only\">{`${value} percent`}</span>\n      </div>\n    </div>\n  );\n};\n\nexport default ScrubBar;\n","// @file\n// Oral Histories subtitle menu.\n\nimport React from 'react';\n\nconst memoiseTrack = (track: TextTrack): string => {\n  if (!track) {\n    return '';\n  }\n  const { kind, mode, language, cues } = track;\n  return [kind, mode, language, cues.length].join(',');\n};\n\ninterface IProps {\n  visible?: boolean;\n  lang?: string;\n  tracks: TextTrack[];\n  id: string;\n  className?: string;\n}\n\nconst SubtitleContainer: React.FunctionComponent<IProps> = ({\n  visible = true,\n  lang,\n  tracks = [],\n  id,\n  className,\n}: IProps) => {\n  const [text, setText] = React.useState('');\n  const [currentTrack, setCurrentTrack] = React.useState(null);\n\n  const cueChange = (e: Event) => {\n    const activeCues = (e.target as TextTrack).activeCues;\n\n    let newText = '';\n    let cue;\n\n    let i;\n    for (i = 0; i < activeCues.length; i += 1) {\n      cue = activeCues[i];\n      if (typeof cue.text !== 'undefined') {\n        newText += cue.text;\n      }\n    }\n    setText(newText);\n  };\n\n  React.useEffect(() => {\n    if (currentTrack) {\n      currentTrack.addEventListener('cuechange', cueChange, false);\n    }\n    return () => {\n      if (currentTrack) {\n        currentTrack.removeEventListener('cuechange', cueChange, false);\n      }\n    };\n  }, [memoiseTrack(currentTrack)]);\n\n  React.useEffect(() => {\n    if (lang && lang.length && tracks && tracks.length) {\n      let track = null;\n      let i;\n      for (i = 0; i < tracks.length; i += 1) {\n        if (tracks[i].language === lang) {\n          track = tracks[i];\n          break;\n        }\n      }\n      setCurrentTrack(track);\n    }\n  }, [lang, tracks]);\n\n  return (\n    <div\n      className={[className || '', 'video-wrapper__subtitle-container'].join(\n        ' ',\n      )}\n      hidden={!visible}\n      aria-hidden={!visible}\n      lang={lang}\n      id={id}\n      aria-atomic=\"true\"\n      aria-live=\"polite\"\n      aria-relevant=\"additions text\"\n    >\n      {visible ? text : ' '}\n    </div>\n  );\n};\n\nexport default SubtitleContainer;\n","// @file\r\n// Menu container.\r\n\r\nimport React from 'react';\r\n\r\ninterface IProps {\r\n  id?: string;\r\n  visible?: boolean;\r\n  className?: string;\r\n  children?: React.ReactNode;\r\n}\r\n\r\nconst Menu: React.FunctionComponent<IProps> = ({\r\n  id,\r\n  visible = false,\r\n  className,\r\n  children,\r\n}: IProps) => {\r\n  return (\r\n    <ol\r\n      className={['video-wrapper__popup-menu', className || ''].join(' ')}\r\n      id={id}\r\n      hidden={!visible}\r\n      aria-expanded={visible}\r\n    >\r\n      {children}\r\n    </ol>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n","import React from 'react';\n\ninterface IProps {\n  label: string;\n  value: string | number | null;\n  selected: boolean;\n  onSelect: (e: React.KeyboardEvent | React.MouseEvent) => void;\n}\n\nconst MenuItem: React.FunctionComponent<IProps> = ({\n  label,\n  value,\n  selected = false,\n  onSelect,\n}: IProps) => {\n  return (\n    <li>\n      <button\n        data-value={value}\n        data-state={selected ? 'active' : 'inactive'}\n        onClick={onSelect}\n        onKeyUp={(e) => {\n          if (e.key === 'Enter') {\n            onSelect(e);\n          }\n        }}\n      >\n        {label}\n      </button>\n    </li>\n  );\n};\n\nexport default MenuItem;\n","// @file\n// Oral Histories subtitle menu.\n\nimport React from 'react';\n\nimport Menu from './Menu';\nimport MenuItem from './MenuItem';\n\ninterface IProps {\n  visible: boolean;\n  id: string;\n  tracks: TextTrackList;\n  selected?: string;\n  onSelect: (selectedLang: string) => void;\n  className?: string;\n}\n\nconst SubtitleMenu: React.FunctionComponent<IProps> = ({\n  visible = false,\n  id,\n  tracks,\n  selected,\n  onSelect,\n  className,\n}: IProps) => {\n  const onSelectLang = (e: React.MouseEvent | React.KeyboardEvent) => {\n    const itemElem = e.target as HTMLElement;\n    const selectedLang = itemElem.getAttribute('data-value') || null;\n    if (typeof onSelect === 'function') {\n      onSelect(selectedLang);\n    }\n  };\n\n  const languageOptions = [\n    <MenuItem\n      key={'_none_'}\n      label={'Off'}\n      value={null}\n      selected={!selected}\n      onSelect={onSelectLang}\n    />,\n  ];\n  let track;\n  let i;\n  if (tracks && tracks.length) {\n    for (i = 0; i < tracks.length; i += 1) {\n      track = tracks[i];\n      languageOptions.push(\n        <MenuItem\n          key={`${track.language}-${i}`}\n          label={track.label}\n          value={track.language}\n          selected={selected && track.language === selected}\n          onSelect={onSelectLang}\n        />,\n      );\n    }\n  }\n\n  return (\n    <Menu\n      className={[className || '', 'subtitles-menu'].join(' ')}\n      id={id}\n      visible={visible}\n    >\n      {languageOptions}\n    </Menu>\n  );\n};\n\nexport default SubtitleMenu;\n","// @file\n// Functional component for a toggle button.\n\nimport React from 'react';\n\nimport SrOnly from './SrOnly';\n\nimport { IAudioPlayerConfig } from './Types';\n\ninterface IProps {\n  enabled?: boolean;\n  hidden?: boolean;\n  btnType: string;\n  toggleState?: boolean;\n  children?: React.ReactNode;\n  onClick?: (e: React.MouseEvent) => void;\n  className?: string;\n  config?: IAudioPlayerConfig;\n}\n\nconst ToggleButton: React.FunctionComponent<IProps> = ({\n  enabled = true,\n  hidden = false,\n  btnType,\n  toggleState = false,\n  children,\n  onClick,\n  className,\n  config = {},\n}: IProps) => {\n  const classNames = [className || '']\n    .concat(config.classNames[btnType] || []);\n  const iconFalseClassNames = []\n    .concat(config.icons[btnType] || [])\n    .concat(config.icons[`${btnType}__false`] || []);\n  const iconTrueClassNames = []\n    .concat(config.icons[btnType] || [])\n    .concat(config.icons[`${btnType}__true`] || []);\n  return (\n    <button\n      className={classNames.join(' ')}\n      disabled={!enabled}\n      hidden={hidden}\n      onClick={onClick}\n    >\n      <SrOnly config={config}>{children}</SrOnly>\n      <span\n        className={iconFalseClassNames.join(' ')}\n        hidden={toggleState}\n      />\n      <span\n        className={iconTrueClassNames.join(' ')}\n        hidden={!toggleState}\n      />\n    </button>\n  );\n};\n\nexport default ToggleButton;\n","// @file\r\n// Oral Histories subtitle menu.\r\n\r\nimport React from 'react';\r\n\r\nimport Menu from './Menu';\r\nimport MenuItem from './MenuItem';\r\n\r\ninterface IProps {\r\n  tracklist?: AudioTrack[];\r\n  selected?: number;\r\n  onSelect?: (track: number) => void;\r\n  id?: string;\r\n  visible?: boolean;\r\n  className?: string;\r\n}\r\n\r\nconst TracklistMenu: React.FunctionComponent<IProps> = ({\r\n  tracklist = [],\r\n  selected = 0,\r\n  visible = false,\r\n  onSelect,\r\n  id,\r\n  className,\r\n}: IProps) => {\r\n  const onSelectTrack = (e: React.MouseEvent | React.KeyboardEvent) => {\r\n    const itemElem = e.target as HTMLElement;\r\n    const indexAttr = itemElem.getAttribute('data-value') || null;\r\n    if (indexAttr === null) {\r\n      return;\r\n    }\r\n    const index = parseInt(indexAttr, 10);\r\n    if (typeof onSelect === 'function') {\r\n      onSelect(index);\r\n    }\r\n  };\r\n\r\n  const trackOptions = tracklist.map((track: AudioTrack, index: number) => {\r\n    return (\r\n      <MenuItem\r\n        key={index}\r\n        label={track.label}\r\n        value={index}\r\n        selected={index === selected}\r\n        onSelect={onSelectTrack}\r\n      />\r\n    );\r\n  });\r\n\r\n  return (\r\n    <Menu\r\n      className={[className || '', 'track-menu'].join(' ')}\r\n      id={id}\r\n      visible={visible}\r\n    >\r\n      {trackOptions}\r\n    </Menu>\r\n  );\r\n};\r\n\r\nexport default TracklistMenu;\r\n","// @file\n// Time utilities.\n\nconst strPadLeft = (n: number): string => {\n  if (n < 10) {\n    return `0${n}`;\n  }\n  return n.toString();\n};\n\nexport const toHHMMSS = (str: string): string => {\n  const secNum = parseInt(str, 10);\n  const hours = Math.floor(secNum / 3600);\n  const minutes = Math.floor((secNum - hours * 3600) / 60);\n  const seconds = secNum - hours * 3600 - minutes * 60;\n\n  return `${strPadLeft(hours)}:${strPadLeft(minutes)}:${strPadLeft(seconds)}`;\n};\n\nexport const toMMSS = (str: string): string => {\n  const secNum = parseInt(str, 10);\n  const minutes = Math.floor(secNum / 60);\n  const seconds = secNum - minutes * 60;\n\n  return `${strPadLeft(minutes)}:${strPadLeft(seconds)}`;\n};\n","// @file\n// Audio player base component.\n\nimport Emitter from 'eventemitter3';\nimport React from 'react';\n\nimport ActionButton from './ActionButton';\nimport ScrubBar from './ScrubBar';\nimport SubtitleContainer from './SubtitleContainer';\nimport SubtitleMenu from './SubtitleMenu';\nimport ToggleButton from './ToggleButton';\nimport TracklistMenu from './TracklistMenu';\n\nimport FontAwesome5 from './Configs/FontAwesome5';\nimport { toMMSS } from './TimeUtils';\nimport { IAudioPlayerConfig } from './Types';\n\ninterface IPlaylistItem {\n  index: number;\n  label: string;\n  audioUrl: string;\n  transcriptUrl: string | null;\n}\n\ninterface IProps {\n  playlist: IPlaylistItem[];\n  id?: string;\n  eventRouter?: Emitter;\n  crossOrigin?: 'anonymous' | 'use-credentials',\n  onEndNextFile?: boolean;\n  config?: IAudioPlayerConfig;\n  singleTrack?: boolean;\n}\n\nconst AudioPlayer: React.FunctionComponent<IProps> = ({\n  playlist = [],\n  id = 'audio-player',\n  eventRouter,\n  crossOrigin,\n  onEndNextFile = false,\n  config = {},\n  singleTrack = false,\n}: IProps) => {\n  const [fileData, setFileData] = React.useState([]);\n  const [selectedFile, setSelectedFile] = React.useState(0);\n  const [progress, setProgress] = React.useState(0);\n  const [timestamp, setTimestamp] = React.useState('00:00');\n  const [playing, setPlaying] = React.useState(false);\n  const [ended, setEnded] = React.useState(false);\n  const [muted, setMuted] = React.useState(false);\n  const [selectedLanguage, setSelectedLanguage] = React.useState(null);\n  const [showTrackListMenu, setShowTrackListMenu] = React.useState(false);\n  const [showSubtitleMenu, setShowSubtitleMenu] = React.useState(false);\n  const [videoMetadataLoaded, setVideoMetadataLoaded] = React.useState(false);\n\n  const captionsContainerId = `${id}__captions`;\n  const timeIndicatorId = `${id}__time-indicator`;\n  const tracklistId = `${id}__track-list`;\n  const subtitleMenuId = `${id}__subtitle-menu`;\n\n  const audioElem = React.useRef(null);\n  const timeElapsedElem = React.useRef(null);\n\n  React.useEffect(() => {\n    audioElem.current.setAttribute('playsinline', 'playsinline');\n  }, []);\n\n  React.useEffect(() => {\n    setFileData(playlist);\n    setSelectedFile(0);\n  }, [playlist]);\n\n  const canPlayPrev = selectedFile > 0;\n  const canPlayNext = selectedFile < fileData.length - 1;\n\n  React.useEffect(() => {\n    audioElem.current.load();\n    audioElem.current.currentTime = 0;\n    setProgress(0);\n  }, [selectedFile]);\n\n  const selectTrack = (trackNumber: number) => {\n    setPlaying(false);\n    setEnded(false);\n    setVideoMetadataLoaded(false);\n    setSelectedFile(trackNumber);\n  };\n\n  const hasVtt = (file: IPlaylistItem) => {\n    return file.transcriptUrl && file.transcriptUrl.length > 0;\n  };\n\n  const subtitleTracks = () => {\n    if (!videoMetadataLoaded) {\n      return [];\n    }\n    return audioElem.current.textTracks;\n  };\n\n  const playable = fileData && fileData.length && videoMetadataLoaded;\n\n  const selectSubtitleLanguage = (lang?: string) => {\n    setShowSubtitleMenu(false);\n    setSelectedLanguage(lang && lang.length ? lang : null);\n  };\n\n  const onLoadedMetadata = () => {\n    setVideoMetadataLoaded(true);\n    selectSubtitleLanguage(selectedLanguage);\n\n    // this.highlighter.selectedFile = this.state.selectedFile;\n    // this.highlighter.updateVideoElement(this.videoElement);\n    // this.highlighter.onVideoElementLoad();\n  };\n\n  const onTimeUpdate = () => {\n    if (audioElem.current.duration > 0) {\n      const value =\n        (100 / audioElem.current.duration) * audioElem.current.currentTime;\n      setProgress(value);\n      setTimestamp(toMMSS(audioElem.current.currentTime));\n    }\n  };\n\n  const playPauseAction = () => {\n    if (!playable) {\n      return;\n    }\n    let newPlaying = false;\n    if (audioElem.current.paused) {\n      audioElem.current.play();\n      newPlaying = true;\n    } else {\n      audioElem.current.pause();\n    }\n    setPlaying(newPlaying);\n    setTimestamp(toMMSS(audioElem.current.currentTime));\n    if (eventRouter) {\n      eventRouter.emit('state.playing', newPlaying);\n    }\n  };\n\n  const nextTrackAction = () => {\n    if (canPlayNext) {\n      selectTrack(selectedFile + 1);\n    }\n  };\n\n  const nextTrackAndPlayAction = () => {\n    if (canPlayNext) {\n      nextTrackAction();\n      setTimeout(() => playPauseAction(), 500);\n    }\n  };\n\n  const onEnded = () => {\n    if (onEndNextFile) {\n      nextTrackAndPlayAction();\n      return;\n    }\n    setEnded(true);\n    setTimestamp(toMMSS(audioElem.current.currentTime));\n    if (eventRouter) {\n      eventRouter.emit('state.playing', false);\n      eventRouter.emit('state.ended', true);\n    }\n  };\n\n  const moveBackwardAction = () => {\n    if (!playable) {\n      return;\n    }\n    audioElem.current.currentTime -= 5;\n  };\n\n  const moveForwardAction = () => {\n    if (!playable) {\n      return;\n    }\n    audioElem.current.currentTime += 5;\n  };\n\n  const rewindAction = () => {\n    audioElem.current.currentTime = 0;\n    setEnded(false);\n    setTimestamp(toMMSS(audioElem.current.currentTime));\n    setProgress(0);\n    if (eventRouter) {\n      eventRouter.emit('state.ended', false);\n    }\n  };\n\n  React.useEffect(() => {\n    let i;\n    for (i = 0; i < audioElem.current.textTracks.length; i += 1) {\n      audioElem.current.textTracks[i].mode =\n        audioElem.current.textTracks[i].language === selectedLanguage\n          ? 'showing'\n          : 'hidden';\n    }\n  }, [selectedLanguage]);\n\n  const toggleMuteAction = () => {\n    const newMute = !audioElem.current.muted;\n    audioElem.current.muted = newMute;\n    setMuted(newMute);\n  };\n\n  const handleRemoteAction = (action: string) => {\n    if (action === 'backward') {\n      moveBackwardAction();\n    } else if (action === 'play_pause') {\n      playPauseAction();\n    } else if (action === 'reset') {\n      rewindAction();\n    } else if (action === 'forward') {\n      moveForwardAction();\n    }\n  };\n\n  React.useEffect(() => {\n    if (eventRouter) {\n      eventRouter.on('remote.action', handleRemoteAction);\n    }\n    return () => {\n      if (eventRouter) {\n        eventRouter.off('remote.action', handleRemoteAction);\n      }\n    };\n  }, []);\n\n  const currentFile = fileData[selectedFile] || null;\n\n  return (\n    <div className=\"video-wrapper\">\n      <audio\n        className=\"video-element\"\n        data-oh-audio-player=\"1\"\n        crossOrigin={crossOrigin}\n        preload=\"metadata\"\n        ref={audioElem}\n        onLoadedMetadata={onLoadedMetadata}\n        onEnded={onEnded}\n        onTimeUpdate={onTimeUpdate}\n        aria-describedby={captionsContainerId}\n      >\n        {currentFile && <source src={currentFile.audioUrl} type=\"audio/mpeg\" />}\n        {currentFile && hasVtt(currentFile) && (\n          <track\n            src={currentFile.transcriptUrl}\n            kind=\"captions\"\n            label=\"English\"\n            srcLang=\"en\"\n          />\n        )}\n      </audio>\n\n      <div className=\"video-controls\">\n        <ScrubBar\n          defaultValue={progress}\n          className=\"video-controls__progress-bar\"\n          onClick={(pos: number) => {\n            audioElem.current.currentTime = pos * audioElem.current.duration;\n          }}\n        />\n\n        <label className=\"sr-only\" htmlFor={timeIndicatorId}>\n          Time elapsed\n        </label>\n\n        <input\n          className=\"video-controls__time-elapsed\"\n          id={timeIndicatorId}\n          readOnly\n          ref={timeElapsedElem}\n          value={timestamp}\n        />\n\n        <div className=\"w-100\" />\n\n        <div className=\"video-controls__button-wrapper\">\n          <ToggleButton\n            btnType=\"tracklist\"\n            aria-controls={tracklistId}\n            enabled={fileData.length > 0 && !singleTrack}\n            onClick={() => {\n              setShowSubtitleMenu(false);\n              setShowTrackListMenu(!showTrackListMenu);\n            }}\n            toggleState={showTrackListMenu}\n            config={config}\n          >\n            Tracklist\n          </ToggleButton>\n\n          <div className=\"video-controls__button-wrapper__space\" />\n\n          <ActionButton\n            btnType=\"previous-audio\"\n            enabled={fileData.length > 1 && canPlayPrev}\n            onClick={() => {\n              if (canPlayPrev) {\n                selectTrack(selectedFile - 1);\n              }\n            }}\n            config={config}\n          >\n            Previous track\n          </ActionButton>\n\n          <ActionButton btnType=\"backward\" onClick={moveBackwardAction} config={config}>\n            Rewind\n          </ActionButton>\n\n          <ToggleButton\n            btnType=\"play\"\n            hidden={ended}\n            onClick={playPauseAction}\n            toggleState={playing}\n            config={config}\n          >\n            {playing ? 'Pause' : 'Play'}\n          </ToggleButton>\n\n          <ActionButton\n            btnType=\"reset\"\n            enabled={ended}\n            hidden={!ended}\n            onClick={rewindAction}\n            config={config}\n          >\n            Restart\n          </ActionButton>\n\n          <ActionButton btnType=\"forward\" onClick={moveForwardAction} config={config}>\n            Fast forward\n          </ActionButton>\n\n          <ActionButton\n            btnType=\"next-audio\"\n            enabled={fileData.length > 1 && canPlayNext}\n            onClick={nextTrackAction}\n            config={config}\n          >\n            Next track\n          </ActionButton>\n\n          <ToggleButton\n            btnType=\"closed-captioning\"\n            aria-controls={subtitleMenuId}\n            enabled={videoMetadataLoaded && hasVtt(currentFile)}\n            onClick={() => {\n              setShowTrackListMenu(false);\n              setShowSubtitleMenu(!showSubtitleMenu);\n            }}\n            toggleState={showSubtitleMenu}\n            config={config}\n          >\n            Closed captioning\n          </ToggleButton>\n\n          <div className=\"video-controls__button-wrapper__space\" />\n\n          <ToggleButton\n            btnType=\"mute\"\n            onClick={toggleMuteAction}\n            toggleState={muted}\n            config={config}\n          >\n            Mute\n          </ToggleButton>\n        </div>\n      </div>\n\n      <SubtitleMenu\n        visible={showSubtitleMenu}\n        id={subtitleMenuId}\n        tracks={subtitleTracks()}\n        selected={selectedLanguage}\n        onSelect={selectSubtitleLanguage}\n      />\n\n      <TracklistMenu\n        visible={!singleTrack && showTrackListMenu}\n        id={tracklistId}\n        tracklist={fileData}\n        selected={selectedFile}\n        onSelect={(trackNumber) => {\n          setShowTrackListMenu(false);\n          selectTrack(trackNumber);\n        }}\n      />\n\n      <SubtitleContainer\n        visible={selectedLanguage !== null}\n        lang={selectedLanguage}\n        tracks={subtitleTracks()}\n        id={captionsContainerId}\n      />\n    </div>\n  );\n};\n\nexport default AudioPlayer;\n\nexport const defaultConfigs = {\n  FontAwesome5,\n};\n"],"names":["SrOnly","config","children","classNames","concat","join","ActionButton","enabled","hidden","btnType","onClick","className","iconClassNames","icons","iconElem","getOffsetX","e","nativeEvent","offsetX","targetTouches","touchE","rect","target","getBoundingClientRect","pageX","left","ScrubBar","defaultValue","outer","React","useRef","useState","value","setValue","setOffsetX","scrubbing","setScrubbing","useEffect","pos","current","clientWidth","onDown","onUp","width","memoiseTrack","track","kind","mode","language","cues","length","SubtitleContainer","visible","lang","tracks","id","text","setText","currentTrack","setCurrentTrack","cueChange","activeCues","newText","cue","i","addEventListener","removeEventListener","Menu","MenuItem","label","selected","onSelect","key","SubtitleMenu","onSelectLang","itemElem","selectedLang","getAttribute","languageOptions","push","ToggleButton","toggleState","iconFalseClassNames","iconTrueClassNames","TracklistMenu","tracklist","onSelectTrack","indexAttr","index","parseInt","trackOptions","map","strPadLeft","n","toString","toMMSS","str","secNum","minutes","Math","floor","seconds","AudioPlayer","playlist","eventRouter","crossOrigin","onEndNextFile","singleTrack","fileData","setFileData","selectedFile","setSelectedFile","progress","setProgress","timestamp","setTimestamp","playing","setPlaying","ended","setEnded","muted","setMuted","selectedLanguage","setSelectedLanguage","showTrackListMenu","setShowTrackListMenu","showSubtitleMenu","setShowSubtitleMenu","videoMetadataLoaded","setVideoMetadataLoaded","captionsContainerId","timeIndicatorId","tracklistId","subtitleMenuId","audioElem","timeElapsedElem","setAttribute","canPlayPrev","canPlayNext","load","currentTime","selectTrack","trackNumber","hasVtt","file","transcriptUrl","subtitleTracks","textTracks","playable","selectSubtitleLanguage","onLoadedMetadata","onTimeUpdate","duration","playPauseAction","newPlaying","paused","play","pause","emit","nextTrackAction","nextTrackAndPlayAction","setTimeout","onEnded","moveBackwardAction","moveForwardAction","rewindAction","toggleMuteAction","newMute","handleRemoteAction","action","on","off","currentFile","audioUrl"],"mappings":"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"}